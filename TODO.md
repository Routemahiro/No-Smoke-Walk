# TODO.md - No-Smoke Walk Osaka

## チェックボックスの運用ルール

- **`- [ ]`**: 未着手
- **`- [x] ... (作業中)`**: 着手済み（作業中）
- **`- [x] ... (YYYY-MM-DD 完了)`**: 完了

## 現在のタスク

- [x] Actions/デプロイ確認（ヒートマップ更新の本番反映チェック）(作業中)
- [x] 引き継ぎ資料の追記（前提env/依存、simple-server方針の明文化）(2026-02-03 完了)
- [ ] 位置情報の許可ダイアログが毎回出る問題を改善（自動取得ONでも毎回許可が出る原因調査。Permissions API/取得タイミング/最終位置の活用などでUX改善）

---

## 完了したタスク

### ドキュメント整備
- [x] 引き継ぎ資料/デプロイ状況ドキュメントの整合性修正（ahead記述の調整、コミット履歴追記、DEPLOYMENT_STATUS.md を追跡してコミット） (2026-01-08 完了)

### ヒートマップ仕様統一（バランス案） - 2026-01-07 完了
- [x] 本番Workers `/api/heatmap` の集約を改善（`userLat/userLon/radius` 対応、メートル基準グリッド、`densityRatio` 返却）

### 位置情報自動取得設定機能 - 2025-11-10 完了
- [x] localStorageで自動取得設定を保存
- [x] トップページにトグルスイッチを追加
- [x] ユーザーが自動/手動を選択可能に
- [x] デプロイ手順のドキュメント更新

### マップ改良（案1: UI改善）- 2025-11-10 完了
- [x] マップの現状分析
  - HeatmapView.tsx: メインヒートマップコンポーネント
  - MiniHeatmap.tsx: トップページのミニマップ
  - useHeatmap.ts: ヒートマップデータ管理フック
  - backend/handlers/heatmap.ts: バックエンドAPI
- [x] フィルタUIの追加（日数選択: 7日/30日/90日/180日）
- [x] カテゴリフィルタ切り替えボタンの追加
- [x] レジェンドを上部に移動して視認性向上
- [x] 現在位置ボタンを大きく目立たせる
- [x] ローディング状態の改善
- [x] アクティブフィルタ表示の追加
- [x] マップサイズを拡大（500px → 600px）

---

**最終更新:** 2026-01-08

